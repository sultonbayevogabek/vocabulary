<div class="container vh-100 d-flex flex-column">
    <div class="d-flex align-items-center justify-content-between px-1 py-3">
        <div (click)="toggleFullScreen()">
            <h3 class="fs-3 mb-0 text-uppercase">Vocabularies</h3>
            <span class="text-secondary" style="font-size: 12px">Total count: {{ vocabularies?.length }}</span>
        </div>

        <div class="d-flex w-50 gap-2">
            <button class="btn btn-primary w-50 rounded-0" (click)="toggleVocabularyForm()">New +</button>
            <button class="btn btn-primary w-50 rounded-0" (click)="play()">Play &#9658;</button>
        </div>
    </div>

    <div class="d-flex justify-content-center mb-1">
        <pagination-controls
                [maxSize]="5"
                (pageChange)="currentPage = $event"
                [previousLabel]="''"
                [nextLabel]="''"
        ></pagination-controls>
    </div>
    <form class="row gap-2 pt-1 gap-md-0 pb-3 px-3" [class.visually-hidden]="!showVocabularyForm"
          [formGroup]="vocabularyForm"
          (ngSubmit)="addNewWord()">
        <div class="col-md-5 px-1">
                  <textarea
                      #wordTextArea
                      class="form-control rounded-0"
                      placeholder="Word"
                      [formControlName]="'word'"
                      (keydown.enter)="$event.preventDefault(); addNewWord()"
                  ></textarea>
        </div>

        <div class="col-md-5 px-1">
                    <textarea
                            class="form-control rounded-0"
                            placeholder="Definition"
                            [formControlName]="'definition'"
                            (keydown.enter)="$event.preventDefault(); addNewWord()"
                    ></textarea>
        </div>

        <div class="col-md-2 px-1">
            <button
                    [disabled]="vocabularyForm.invalid"
                    class="btn btn-primary w-100 h-100 rounded-0">
                Add +
            </button>
        </div>
    </form>

    <div class="d-flex flex-column flex-grow-1 gap-1 px-1 pb-3 pt-1 overflow-auto">
        <table>
            <tr *ngFor="let item of vocabularies | paginate: { itemsPerPage: 20, currentPage }">
                <td class="align-top border py-1 px-2 text-center">
                    {{ item?.index }}
                </td>
                <td class="border">
                        <textarea
                                class="d-block w-100 h-100 bg-transparent border-0 fw-bold"
                                #word
                                [value]="item?.word"
                                (focusout)="updateVocabulary(item, word.value, definition.value)"
                                (keydown.enter)="$event.preventDefault(); updateVocabulary(item, word.value, definition.value)"
                        ></textarea>
                </td>
                <td class="border">
                        <textarea
                                class="d-block w-100 h-100 bg-transparent border-0" #definition
                                [value]="item?.definition"
                                (focusout)="updateVocabulary(item, word.value, definition.value)"
                                (keydown.enter)="$event.preventDefault(); updateVocabulary(item, word.value, definition.value)"
                        ></textarea>
                </td>
            </tr>
        </table>
    </div>

</div>

